<!DOCTYPE html SYSTEM "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Waldschlucht Viz</title>
        <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <style type="text/css">
            .graph{border: 1px solid black;}
        </style>
        <style>

.link {
  fill: none;
  stroke: #666;
  stroke-width: 1.5px;
}

.node circle {
  fill: #ccc;
  stroke: #fff;
  stroke-width: 1.5px;
}

text {
  font: 10px sans-serif;
  pointer-events: none;
}

</style>
    </head>
    <body>
        <div id="graph"></div>
        <script type="text/javascript">
            var links1 = [{source: "scene", target: "#de", type: "instanceOf"},
{source: "setting", target: "#de", type: "instanceOf"},
{source: "related-to", target: "#relatives #relation", type: "instanceOf"},
{source: "wolfsschluchtszene", target: "#scene", type: "instanceOf"},
{source: "nacht", target: "#setting", type: "instanceOf"},
{source: "mond", target: "#setting", type: "instanceOf"},
{source: "wald", target: "#setting", type: "instanceOf"},
{source: "kreuzweg", target: "#setting", type: "instanceOf"},
{source: "kreis", target: "#setting", type: "instanceOf"},
{source: "glocke", target: "#setting", type: "instanceOf"},
{source: "kugel", target: "#object-of-use", type: "instanceOf"},
{source: "sieben", target: "#kugel", type: "instanceOf"},
{source: "drei", target: "#kugel", type: "instanceOf"},
{source: "sechs", target: "#kugel", type: "instanceOf"},
{source: "sechzig", target: "#kugel", type: "instanceOf"},
{source: "kugelguss", target: "#action", type: "instanceOf"},
{source: "form", target: "#object-of-use", type: "instanceOf"},
{source: "kohlen", target: "#object-of-use", type: "instanceOf"},
{source: "blei", target: "#object-of-use", type: "instanceOf"},
{source: "erscheinungen", target: "#setting", type: "instanceOf"},
{source: "wildesHeer", target: "#erscheinungen", type: "instanceOf"},
{source: "wild", target: "#creature-in-play", type: "instanceOf"},
{source: "waldvoegel", target: "#creature-in-play", type: "instanceOf"},
{source: "rabe", target: "#creature-in-play #waldvoegel", type: "instanceOf"},
{source: "eule", target: "#creature-in-play #waldvoegel", type: "instanceOf"},
{source: "ross", target: "#creature-in-play", type: "instanceOf"},
{source: "sammiel", target: "#name #role", type: "instanceOf"},
{source: "reiter", target: "#role", type: "instanceOf"},
{source: "schwarzeJaeger", target: "#role", type: "instanceOf"},
{source: "fremde", target: "#role", type: "instanceOf"},
{source: "stelzfuss", target: "#role", type: "instanceOf"},
{source: "teufel", target: "#role", type: "instanceOf"},
{source: "boese", target: "#role", type: "instanceOf"},
{source: "max", target: "#role #name", type: "instanceOf"},
{source: "jaeger", target: "#roleDesc", type: "instanceOf"},
{source: "wilhelm", target: "#role #name", type: "instanceOf"},
{source: "schreiber", target: "#roleDesc", type: "instanceOf"},
{source: "braeutigam", target: "#role", type: "instanceOf"},
{source: "georgschmid", target: "#person #name", type: "instanceOf"},
{source: "edward", target: "#role #name", type: "instanceOf"},
{source: "rudolf", target: "#role #name", type: "instanceOf"},
{source: "Robert", target: "#role #name", type: "instanceOf"},
{source: "braut", target: "#role", type: "instanceOf"},
{source: "brautjungfern", target: "#role", type: "instanceOf"},
{source: "kranz", target: "object-of-use", type: "instanceOf"},
{source: "seide", target: "object-of-use", type: "instanceOf"},
{source: "rosmarin", target: "object-of-use", type: "instanceOf"},
{source: "myrte", target: "object-of-use", type: "instanceOf"},
{source: "silber", target: "object-of-use", type: "instanceOf"},
{source: "lavendel", target: "object-of-use", type: "instanceOf"},
{source: "thymian", target: "object-of-use", type: "instanceOf"},
{source: "taube", target: "#creature-in-play", type: "instanceOf"},
{source: "traum", target: "", type: "instanceOf"},
{source: "bild", target: "", type: "instanceOf"},
{source: "opfer", target: "", type: "instanceOf"},
{source: "blut", target: "", type: "instanceOf"},
{source: "reigen", target: "", type: "instanceOf"},
{source: "tanz", target: "", type: "instanceOf"}];

var links2 = [{source: "#nacht", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#mond", target: "#nacht", type: "#part-of"},{source: "#mond", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#wald", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#kreuzweg", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#kreis", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#glocke", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#erscheinungen", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#wildesHeer", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#wild", target: "#wildesHeer", type: "#part-of"},{source: "#waldvoegel", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#kugelguss", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#max", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#sammiel", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#caspar", target: "#wolfsschluchtszene", type: "#part-of"},{source: "#eule", target: "#erscheinungen", type: "#part-of"},{source: "#ross", target: "#reiter", type: "#related-to"},{source: "#drei", target: "#sieben", type: "#same-as"},{source: "#sechzig", target: "#sechs", type: "#same-as"},{source: "#form", target: "#kugelguss", type: "#used-for"},{source: "#kohlen", target: "#kugelguss", type: "#used-for"},{source: "#blei", target: "#kugelguss", type: "#used-for"},{source: "#max", target: "#jaeger", type: "#same-as"},{source: "#max", target: "#wilhelm", type: "#comparable-with"},{source: "#max", target: "#agathe", type: "#related-to"},{source: "#wilhelm", target: "#jaeger", type: "#same-as"},{source: "#wilhelm", target: "#pauline", type: "#related-to"}];

var links = [{source: "#nacht", target: "#setting", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#mond", target: "#setting", type: "role"},{source: "#nacht", target: "#setting", type: "role"},{source: "#mond", target: "#setting", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#wald", target: "#setting", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#kreuzweg", target: "#setting", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#kreis", target: "#setting", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#glocke", target: "#setting", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#erscheinungen", target: "#setting", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#wildesHeer", target: "#setting", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#wild", target: "#creature-in-play", type: "role"},{source: "#wildesHeer", target: "#setting", type: "role"},{source: "#waldvoegel", target: "#creature-in-play", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#kugelguss", target: "#action", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#max", target: "#name", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#sammiel", target: "#name", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#caspar", target: "#name", type: "role"},{source: "#wolfsschluchtszene", target: "#scene", type: "role"},{source: "#eule", target: "#creature-in-play", type: "role"},{source: "#erscheinungen", target: "#creature-in-play", type: "role"},{source: "#ross", target: "#creature-in-play", type: "role"},{source: "#reiter", target: "#role", type: "role"},{source: "#schwarzeJaeger", target: "#role", type: "role"},{source: "#teufel", target: "#role", type: "role"},{source: "#drei", target: "#kugel", type: "role"},{source: "#sieben", target: "#kugel", type: "role"},{source: "#sechzig", target: "#kugel", type: "role"},{source: "#sechs", target: "#kugel", type: "role"},{source: "#form", target: "#object-of-use", type: "role"},{source: "#kugelguss", target: "#action", type: "role"},{source: "#kohlen", target: "#object-of-use", type: "role"},{source: "#kugelguss", target: "#action", type: "role"},{source: "#blei", target: "#object-of-use", type: "role"},{source: "#kugelguss", target: "#action", type: "role"},{source: "#max", target: "#name", type: "role"},{source: "#jaeger", target: "#role", type: "role"},{source: "#braeutigam", target: "#role", type: "role"},{source: "#max", target: "#name", type: "role"},{source: "#wilhelm", target: "#name", type: "role"},{source: "#edward", target: "#name", type: "role"},{source: "#georgschmid", target: "#name", type: "role"},{source: "#max", target: "#name", type: "role"},{source: "#agathe", target: "#name", type: "role"},{source: "#wilhelm", target: "#name", type: "role"},{source: "#jaeger", target: "#role", type: "role"},{source: "#braeutigam", target: "#role", type: "role"},{source: "#wilhelm", target: "#name", type: "role"},{source: "#pauline", target: "#name", type: "role"}];
        </script>
        <script type="text/javascript">

            
        /*      d3.xml('FreiDi_topicMap_2Waldschlucht.xml', 'application/xml', function(xml) {
                d3.select('#graph').data(xml.documentElement.getElementsByTagName('topic'))
                .enter().append("div")
                    .classed('graph', true)
                    .text(function(d){return d.textContent;});
            });*/
            
            var nodes = {};

           // Compute the distinct nodes from the links.
           links.forEach(function(link) {
             link.source = nodes[link.source] || (nodes[link.source] = {name: link.source});
             link.target = nodes[link.target] || (nodes[link.target] = {name: link.target});
           });
           
           console.log(links);

           var width = 960,
               height = 1000;
           
           var force = d3.layout.force()
               .nodes(d3.values(nodes))
               .links(links)
               .size([width, height])
               .linkDistance(60)
               .charge(-300)
               .on("tick", tick)
               .start();
           
           var svg = d3.select("body").append("svg")
               .attr("width", width)
               .attr("height", height);
           
           var link = svg.selectAll(".link")
               .data(force.links())
             .enter().append("line")
               .attr("class", "link")
               .attr("title",function(d) { return d.type; });
           
           var node = svg.selectAll(".node")
               .data(force.nodes())
             .enter().append("g")
               .attr("class", "node")
               .on("mouseover", mouseover)
               .on("mouseout", mouseout)
               .call(force.drag);
           
           node.append("circle")
               .attr("r", 8);
           
           node.append("text")
               .attr("x", 12)
               .attr("dy", ".35em")
               .text(function(d) { return d.name; });
           
           function tick() {
             link
                 .attr("x1", function(d) { return d.source.x; })
                 .attr("y1", function(d) { return d.source.y; })
                 .attr("x2", function(d) { return d.target.x; })
                 .attr("y2", function(d) { return d.target.y; });
           
             node
                 .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
           }
           
           function mouseover() {
             d3.select(this).select("circle").transition()
                 .duration(750)
                 .attr("r", 16);
           }
           
           function mouseout() {
             d3.select(this).select("circle").transition()
                 .duration(750)
                 .attr("r", 8);
           }
          
        </script>
    </body>
</html>